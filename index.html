<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GRASIAS - Modern Ride Sharing</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #667eea;
            --primary-dark: #5a67d8;
            --secondary: #764ba2;
            --accent: #10b981;
            --background: #0f0f23;
            --surface: rgba(255, 255, 255, 0.1);
            --text: #ffffff;
            --text-muted: #a0aec0;
            --border: rgba(255, 255, 255, 0.2);
            --shadow: rgba(102, 126, 234, 0.3);
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #10b981 100%);
            color: var(--text);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        /* Animated Background */
        .animated-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #10b981 100%);
        }

        .particle {
            position: absolute;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            pointer-events: none;
            animation: float 6s ease-in-out infinite;
        }

        /* Glassmorphism */
        .glass {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .glass-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .glass-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(102, 126, 234, 0.3);
        }

        /* Neon Effects */
        .neon-glow {
            box-shadow: 0 0 20px var(--shadow);
            animation: pulse-glow 2s ease-in-out infinite;
        }

        .neon-text {
            text-shadow: 0 0 10px currentColor, 0 0 20px currentColor, 0 0 30px currentColor;
            animation: neon-pulse 2s ease-in-out infinite;
        }

        /* Buttons */
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 50px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            font-size: 16px;
        }

        .btn-primary {
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            color: white;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.6);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        /* Form Elements */
        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            text-align: right;
        }

        .form-input {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.3);
        }

        .form-input::placeholder {
            color: var(--text-muted);
        }

        /* Layout */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .flex {
            display: flex;
        }

        .flex-col {
            flex-direction: column;
        }

        .items-center {
            align-items: center;
        }

        .justify-center {
            justify-content: center;
        }

        .justify-between {
            justify-content: space-between;
        }

        .text-center {
            text-align: center;
        }

        .text-right {
            text-align: right;
        }

        .hidden {
            display: none;
        }

        /* Floating Navbar */
        .floating-nav {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 1000;
            transition: all 0.5s ease;
            opacity: 0;
            transform: translateX(-50%) translateY(-100%);
        }

        .floating-nav.visible {
            opacity: 1;
            transform: translateX(-50%) translateY(0);
        }

        /* Screens */
        .screen {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .screen.hidden {
            display: none;
        }

        /* Role Selection */
        .role-card {
            padding: 24px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 16px;
        }

        .role-card:hover {
            border-color: var(--primary);
            background: rgba(102, 126, 234, 0.1);
        }

        .role-card.selected {
            border-color: var(--primary);
            background: rgba(102, 126, 234, 0.2);
            box-shadow: 0 0 20px rgba(102, 126, 234, 0.4);
        }

        /* Map Interface */
        .map-container {
            display: flex;
            height: 100vh;
        }

        .map-area {
            flex: 1;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.2), rgba(118, 75, 162, 0.2));
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .sidebar {
            width: 400px;
            background: rgba(15, 15, 35, 0.9);
            backdrop-filter: blur(20px);
            border-left: 1px solid rgba(255, 255, 255, 0.1);
            padding: 24px;
            overflow-y: auto;
        }

        /* Driver Cards */
        .driver-card {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .driver-card:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
        }

        .driver-card.selected {
            border-color: var(--primary);
            box-shadow: 0 0 20px rgba(102, 126, 234, 0.4);
        }

        /* Animations */
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }

        @keyframes pulse-glow {
            0%, 100% { box-shadow: 0 0 20px rgba(102, 126, 234, 0.3); }
            50% { box-shadow: 0 0 40px rgba(102, 126, 234, 0.6); }
        }

        @keyframes neon-pulse {
            0%, 100% { text-shadow: 0 0 5px currentColor, 0 0 10px currentColor, 0 0 15px currentColor; }
            50% { text-shadow: 0 0 10px currentColor, 0 0 20px currentColor, 0 0 30px currentColor; }
        }

        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .animate-slide-up {
            animation: slideInUp 0.6s ease-out;
        }

        .animate-float {
            animation: float 6s ease-in-out infinite;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .map-container {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                height: 50vh;
            }
            
            .map-area {
                height: 50vh;
            }
        }

        /* File Upload */
        .file-upload {
            position: relative;
            display: block;
            width: 100%;
        }

        .file-upload input[type="file"] {
            position: absolute;
            opacity: 0;
            width: 100%;
            height: 100%;
            cursor: pointer;
        }

        .file-upload-area {
            border: 2px dashed rgba(255, 255, 255, 0.3);
            border-radius: 12px;
            padding: 24px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .file-upload-area:hover {
            border-color: var(--primary);
            background: rgba(102, 126, 234, 0.1);
        }

        /* Status indicators */
        .status-online {
            color: #10b981;
        }

        .status-busy {
            color: #f59e0b;
        }

        .status-offline {
            color: #ef4444;
        }

        /* Rating stars */
        .rating {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .star {
            color: #fbbf24;
        }
    </style>
</head>
<body>
    <!-- Animated Background -->
    <div class="animated-bg" id="animatedBg"></div>

    <!-- Floating Navigation -->
    <nav class="floating-nav glass" id="floatingNav">
        <div style="padding: 12px 24px;">
            <div class="flex items-center" style="gap: 16px;">
                <div style="font-size: 20px; font-weight: bold; color: var(--primary);" class="neon-text">GRASIAS</div>
                <button class="btn btn-secondary" onclick="showScreen('driver-form')">
                    🚗 سائق
                </button>
                <button class="btn btn-secondary" onclick="showScreen('passenger-form')">
                    👤 راكب
                </button>
            </div>
        </div>
    </nav>

    <!-- Login Screen -->
    <div class="screen" id="login-screen">
        <div class="glass-card animate-slide-up" style="width: 100%; max-width: 400px;">
            <div class="text-center" style="margin-bottom: 32px;">
                <h1 style="font-size: 48px; font-weight: bold; color: var(--primary); margin-bottom: 8px;" class="neon-text">GRASIAS</h1>
                <p style="color: var(--text-muted);">مرحباً بك في مستقبل النقل</p>
            </div>

            <div style="margin-bottom: 32px;">
                <div class="role-card" id="driver-role" onclick="selectRole('driver')">
                    <div class="flex items-center justify-center" style="gap: 12px;">
                        <span style="font-size: 24px;">🚗</span>
                        <span style="font-size: 18px; font-weight: 600;">سائق</span>
                    </div>
                    <p style="font-size: 14px; color: var(--text-muted); margin-top: 8px; text-align: center;">انضم كسائق واربح المال</p>
                </div>

                <div class="role-card" id="passenger-role" onclick="selectRole('passenger')">
                    <div class="flex items-center justify-center" style="gap: 12px;">
                        <span style="font-size: 24px;">👤</span>
                        <span style="font-size: 18px; font-weight: 600;">راكب</span>
                    </div>
                    <p style="font-size: 14px; color: var(--text-muted); margin-top: 8px; text-align: center;">احجز رحلتك بسهولة</p>
                </div>
            </div>

            <button class="btn btn-primary neon-glow" style="width: 100%; font-size: 18px;" onclick="proceedWithRole()" id="loginBtn" disabled>
                🔐 تسجيل الدخول باستخدام Google
            </button>
        </div>
    </div>

    <!-- Passenger Form Screen -->
    <div class="screen hidden" id="passenger-form-screen">
        <div class="glass-card animate-slide-up" style="width: 100%; max-width: 400px;">
            <div class="text-center" style="margin-bottom: 32px;">
                <div style="width: 64px; height: 64px; background: rgba(102, 126, 234, 0.2); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 16px;" class="animate-float">
                    <span style="font-size: 32px;">👤</span>
                </div>
                <h2 style="font-size: 24px; font-weight: bold; margin-bottom: 8px;">معلومات الراكب</h2>
                <p style="color: var(--text-muted);">أكمل بياناتك للمتابعة</p>
            </div>

            <form onsubmit="submitPassengerForm(event)">
                <div class="form-group">
                    <label class="form-label">الاسم الكامل</label>
                    <input type="text" class="form-input" placeholder="أدخل اسمك الكامل" required>
                </div>

                <div class="form-group">
                    <label class="form-label">رقم الهاتف</label>
                    <input type="tel" class="form-input" placeholder="0612345678" required>
                </div>

                <div class="form-group">
                    <label class="form-label">صورة بطاقة الهوية</label>
                    <label class="file-upload">
                        <input type="file" accept="image/*" required>
                        <div class="file-upload-area">
                            <div style="font-size: 32px; margin-bottom: 8px;">📁</div>
                            <p style="color: var(--text-muted);">اختر صورة بطاقة الهوية</p>
                        </div>
                    </label>
                </div>

                <button type="submit" class="btn btn-primary neon-glow" style="width: 100%; font-size: 18px;">
                    متابعة ←
                </button>
            </form>
        </div>
    </div>

    <!-- Driver Form Screen -->
    <div class="screen hidden" id="driver-form-screen">
        <div class="glass-card animate-slide-up" style="width: 100%; max-width: 400px;">
            <div class="text-center" style="margin-bottom: 32px;">
                <div style="width: 64px; height: 64px; background: rgba(102, 126, 234, 0.2); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 16px;" class="animate-float">
                    <span style="font-size: 32px;">🚗</span>
                </div>
                <h2 style="font-size: 24px; font-weight: bold; margin-bottom: 8px;">معلومات السائق</h2>
                <p style="color: var(--text-muted);">أكمل بياناتك للانضمام كسائق</p>
            </div>

            <form onsubmit="submitDriverForm(event)" id="driverForm">
                <div id="driverFormFields">
                    <div class="form-group">
                        <label class="form-label">الاسم الكامل</label>
                        <input type="text" class="form-input" placeholder="أدخل اسمك الكامل" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label">رقم الهاتف</label>
                        <input type="tel" class="form-input" placeholder="0612345678" required>
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
                        <div class="form-group">
                            <label class="form-label">نوع السيارة</label>
                            <input type="text" class="form-input" placeholder="تويوتا كورولا" required>
                        </div>

                        <div class="form-group">
                            <label class="form-label">لون السيارة</label>
                            <input type="text" class="form-input" placeholder="أبيض" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">رقم لوحة السيارة</label>
                        <input type="text" class="form-input" placeholder="123-أ-45" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label">صورة بطاقة الهوية</label>
                        <label class="file-upload">
                            <input type="file" accept="image/*" required>
                            <div class="file-upload-area">
                                <div style="font-size: 24px; margin-bottom: 8px;">📁</div>
                                <p style="color: var(--text-muted);">اختر صورة بطاقة الهوية</p>
                            </div>
                        </label>
                    </div>

                    <div class="form-group">
                        <label class="form-label">صورة التشخيص التقني</label>
                        <label class="file-upload">
                            <input type="file" accept="image/*" required>
                            <div class="file-upload-area">
                                <div style="font-size: 24px; margin-bottom: 8px;">📁</div>
                                <p style="color: var(--text-muted);">اختر صورة التشخيص التقني</p>
                            </div>
                        </label>
                    </div>

                    <button type="submit" class="btn btn-primary neon-glow" style="width: 100%; font-size: 18px;">
                        📄 عرض التعهد
                    </button>
                </div>

                <div id="driverDeclaration" class="hidden">
                    <div class="glass-card" style="border: 1px solid var(--primary); margin-bottom: 24px;">
                        <h3 style="font-size: 18px; font-weight: 600; color: var(--primary); margin-bottom: 12px;">تعهد السائق</h3>
                        <div style="font-size: 14px; line-height: 1.6; text-align: right;">
                            أتعهد بأن جميع المعلومات المقدمة صحيحة ودقيقة، وأن سيارتي في حالة جيدة وصالحة للقيادة.
                            كما أتعهد بالالتزام بقوانين المرور وتوفير خدمة آمنة ومريحة للركاب.
                            أوافق على شروط وأحكام استخدام تطبيق GRASIAS.
                        </div>
                    </div>

                    <button type="button" class="btn btn-primary neon-glow" style="width: 100%; font-size: 18px;" onclick="completeDriverRegistration()">
                        أوافق وأتابع ←
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Map Interface Screen -->
    <div class="screen hidden" id="map-screen" style="padding: 0;">
        <div class="map-container">
            <!-- Map Area -->
            <div class="map-area">
                <div class="glass-card animate-float">
                    <div style="text-align: center;">
                        <div style="font-size: 64px; margin-bottom: 16px;">🗺️</div>
                        <h3 style="font-size: 24px; font-weight: bold; margin-bottom: 8px;">خريطة تفاعلية</h3>
                        <p style="color: var(--text-muted);">سيتم دمج خريطة حقيقية هنا</p>
                    </div>
                </div>

                <!-- Floating location indicator -->
                <div style="position: absolute; top: 20px; right: 20px;">
                    <div class="glass-card animate-slide-up" style="padding: 12px;">
                        <div class="flex items-center" style="gap: 8px;">
                            <span style="font-size: 20px;">📍</span>
                            <span style="font-size: 14px; font-weight: 500;">موقعك الحالي</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sidebar -->
            <div class="sidebar">
                <div style="margin-bottom: 24px;">
                    <div class="text-center">
                        <h2 style="font-size: 24px; font-weight: bold; color: var(--primary); margin-bottom: 8px;" class="neon-text" id="sidebarTitle">
                            حجز رحلة
                        </h2>
                        <div class="flex items-center justify-center" style="gap: 8px; color: var(--text-muted);">
                            <span id="roleIcon">👤</span>
                            <span id="roleText">راكب</span>
                        </div>
                    </div>
                </div>

                <!-- Trip Status (when active) -->
                <div id="tripStatus" class="hidden">
                    <div class="glass-card neon-glow" style="border: 1px solid var(--primary); margin-bottom: 24px; text-align: center;">
                        <div style="width: 48px; height: 48px; background: rgba(102, 126, 234, 0.2); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 12px;">
                            <span style="font-size: 24px;">⏰</span>
                        </div>
                        <h3 style="font-weight: 600; color: var(--primary); margin-bottom: 4px;">رحلة نشطة</h3>
                        <p style="font-size: 14px; color: var(--text-muted);" id="tripStatusText">السائق في الطريق</p>
                    </div>
                </div>

                <!-- Passenger Content -->
                <div id="passengerContent">
                    <div style="margin-bottom: 24px;">
                        <h3 style="font-size: 18px; font-weight: 600; margin-bottom: 16px; display: flex; align-items: center; gap: 8px;">
                            <span>🚗</span>
                            السائقون القريبون
                        </h3>
                        <div id="driversList">
                            <!-- Drivers will be populated by JavaScript -->
                        </div>
                    </div>

                    <button id="bookRideBtn" class="btn btn-primary neon-glow hidden" style="width: 100%; font-size: 18px;" onclick="bookRide()">
                        🚗 حجز الرحلة
                    </button>
                </div>

                <!-- Driver Content -->
                <div id="driverContent" class="hidden">
                    <div style="margin-bottom: 24px;">
                        <div class="form-group">
                            <label class="form-label">حالة السائق</label>
                            <select class="form-input" id="driverStatus" onchange="updateDriverStatus()">
                                <option value="available">متاح</option>
                                <option value="busy">مشغول</option>
                                <option value="offline">غير متصل</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="form-label">عدد المقاعد المتاحة</label>
                            <input type="number" class="form-input" min="1" max="8" value="4" id="availableSeats">
                        </div>

                        <div class="form-group">
                            <label class="form-label">ملاحظات السائق</label>
                            <textarea class="form-input" placeholder="معلومات إضافية للركاب..." rows="3" id="driverNotes"></textarea>
                        </div>
                    </div>

                    <!-- Price Calculator -->
                    <div class="glass-card" style="margin-bottom: 24px;">
                        <h4 style="font-weight: 600; margin-bottom: 12px; display: flex; align-items: center; gap: 8px;">
                            <span>💰</span>
                            حاسبة الثمن
                        </h4>
                        <div style="margin-bottom: 12px;">
                            <input type="number" class="form-input" placeholder="المسافة (كم)" id="distanceInput" oninput="calculatePrice()">
                        </div>
                        <div id="calculatedPrice" class="hidden" style="background: rgba(102, 126, 234, 0.2); color: var(--primary); padding: 12px; border-radius: 8px; text-align: center; font-weight: 600;">
                            الثمن: 0 دينار
                        </div>
                    </div>

                    <button class="btn btn-primary neon-glow" style="width: 100%; font-size: 18px;" onclick="activateRide()" id="activateRideBtn">
                        🚗 تفعيل الرحلة
                    </button>
                </div>

                <!-- Logout Button -->
                <button class="btn" style="width: 100%; font-size: 16px; background: #ef4444; color: white; margin-top: 24px;" onclick="logout()">
                    🚪 تسجيل الخروج
                </button>
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let selectedRole = null;
        let selectedDriver = null;
        let isRideActive = false;
        let currentScreen = 'login-screen';

        // Mock drivers data
        const mockDrivers = [
            {
                id: '1',
                name: 'أحمد محمد',
                rating: 4.8,
                distance: '0.5 كم',
                carType: 'تويوتا كورولا',
                carColor: 'أبيض',
                price: 15,
                eta: '3 دقائق'
            },
            {
                id: '2',
                name: 'سارة أحمد',
                rating: 4.9,
                distance: '0.8 كم',
                carType: 'هيونداي إلنترا',
                carColor: 'أسود',
                price: 18,
                eta: '5 دقائق'
            },
            {
                id: '3',
                name: 'محمد علي',
                rating: 4.7,
                distance: '1.2 كم',
                carType: 'نيسان صني',
                carColor: 'فضي',
                price: 20,
                eta: '7 دقائق'
            }
        ];

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            createAnimatedBackground();
            setupScrollListener();
            populateDriversList();
        });

        // Animated background
        function createAnimatedBackground() {
            const bg = document.getElementById('animatedBg');
            
            for (let i = 0; i < 50; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.top = Math.random() * 100 + '%';
                particle.style.width = Math.random() * 4 + 2 + 'px';
                particle.style.height = particle.style.width;
                particle.style.animationDelay = Math.random() * 6 + 's';
                particle.style.animationDuration = (Math.random() * 4 + 4) + 's';
                bg.appendChild(particle);
            }
        }

        // Scroll listener for floating nav
        function setupScrollListener() {
            window.addEventListener('scroll', function() {
                const nav = document.getElementById('floatingNav');
                if (window.scrollY > 100 && currentScreen !== 'login-screen') {
                    nav.classList.add('visible');
                } else {
                    nav.classList.remove('visible');
                }
            });
        }

        // Role selection
        function selectRole(role) {
            selectedRole = role;
            
            // Update UI
            document.querySelectorAll('.role-card').forEach(card => {
                card.classList.remove('selected');
            });
            document.getElementById(role + '-role').classList.add('selected');
            
            // Enable login button
            document.getElementById('loginBtn').disabled = false;
        }

        // Proceed with selected role
        function proceedWithRole() {
            if (!selectedRole) return;
            
            // Simulate Google sign-in delay
            setTimeout(() => {
                if (selectedRole === 'passenger') {
                    showScreen('passenger-form-screen');
                } else {
                    showScreen('driver-form-screen');
                }
            }, 1000);
        }

        // Show screen
        function showScreen(screenId) {
            // Hide all screens
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.add('hidden');
            });
            
            // Show target screen
            document.getElementById(screenId).classList.remove('hidden');
            currentScreen = screenId;
            
            // Update floating nav visibility
            const nav = document.getElementById('floatingNav');
            if (screenId === 'login-screen') {
                nav.classList.remove('visible');
            }
        }

        // Submit passenger form
        function submitPassengerForm(event) {
            event.preventDefault();
            
            // Simulate form submission
            setTimeout(() => {
                showMapInterface('passenger');
            }, 1000);
        }

        // Submit driver form
        function submitDriverForm(event) {
            event.preventDefault();
            
            // Show declaration
            document.getElementById('driverFormFields').classList.add('hidden');
            document.getElementById('driverDeclaration').classList.remove('hidden');
        }

        // Complete driver registration
        function completeDriverRegistration() {
            setTimeout(() => {
                showMapInterface('driver');
            }, 1000);
        }

        // Show map interface
        function showMapInterface(role) {
            selectedRole = role;
            showScreen('map-screen');
            
            // Update sidebar content
            if (role === 'passenger') {
                document.getElementById('sidebarTitle').textContent = 'حجز رحلة';
                document.getElementById('roleIcon').textContent = '👤';
                document.getElementById('roleText').textContent = 'راكب';
                document.getElementById('passengerContent').classList.remove('hidden');
                document.getElementById('driverContent').classList.add('hidden');
            } else {
                document.getElementById('sidebarTitle').textContent = 'لوحة السائق';
                document.getElementById('roleIcon').textContent = '🚗';
                document.getElementById('roleText').textContent = 'سائق';
                document.getElementById('passengerContent').classList.add('hidden');
                document.getElementById('driverContent').classList.remove('hidden');
            }
        }

        // Populate drivers list
        function populateDriversList() {
            const driversList = document.getElementById('driversList');
            
            mockDrivers.forEach(driver => {
                const driverCard = document.createElement('div');
                driverCard.className = 'driver-card';
                driverCard.onclick = () => selectDriver(driver);
                
                driverCard.innerHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 12px;">
                        <div>
                            <h4 style="font-weight: 600; margin-bottom: 4px;">${driver.name}</h4>
                            <div class="rating">
                                <span class="star">⭐</span>
                                <span style="font-size: 14px;">${driver.rating}</span>
                            </div>
                        </div>
                        <div style="background: rgba(102, 126, 234, 0.2); color: var(--primary); padding: 4px 8px; border-radius: 12px; font-size: 12px; font-weight: 500;">
                            ${driver.distance}
                        </div>
                    </div>
                    
                    <div style="font-size: 14px; color: var(--text-muted); margin-bottom: 12px;">
                        <p>${driver.carType} - ${driver.carColor}</p>
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 8px;">
                            <span style="display: flex; align-items: center; gap: 4px;">
                                ⏰ ${driver.eta}
                            </span>
                            <span style="display: flex; align-items: center; gap: 4px; font-weight: 600; color: var(--primary);">
                                💰 ${driver.price} دينار
                            </span>
                        </div>
                    </div>
                    
                    <div style="display: flex; gap: 8px;">
                        <button class="btn btn-secondary" style="flex: 1; font-size: 14px;" onclick="event.stopPropagation(); callDriver('${driver.id}')">
                            📞 اتصال
                        </button>
                        <button class="btn btn-secondary" style="flex: 1; font-size: 14px;" onclick="event.stopPropagation(); messageDriver('${driver.id}')">
                            💬 رسالة
                        </button>
                    </div>
                `;
                
                driversList.appendChild(driverCard);
            });
        }

        // Select driver
        function selectDriver(driver) {
            selectedDriver = driver;
            
            // Update UI
            document.querySelectorAll('.driver-card').forEach(card => {
                card.classList.remove('selected');
            });
            event.currentTarget.classList.add('selected');
            
            // Show book ride button
            const bookBtn = document.getElementById('bookRideBtn');
            bookBtn.classList.remove('hidden');
            bookBtn.innerHTML = `🚗 حجز الرحلة مع ${driver.name}`;
        }

        // Book ride
        function bookRide() {
            if (!selectedDriver) return;
            
            isRideActive = true;
            document.getElementById('tripStatus').classList.remove('hidden');
            document.getElementById('bookRideBtn').classList.add('hidden');
        }

        // Activate ride (for drivers)
        function activateRide() {
            const status = document.getElementById('driverStatus').value;
            if (status === 'offline') return;
            
            isRideActive = true;
            document.getElementById('tripStatus').classList.remove('hidden');
            document.getElementById('tripStatusText').textContent = 'في انتظار الركاب';
        }

        // Update driver status
        function updateDriverStatus() {
            const status = document.getElementById('driverStatus').value;
            const activateBtn = document.getElementById('activateRideBtn');
            
            if (status === 'offline') {
                activateBtn.disabled = true;
                activateBtn.style.opacity = '0.5';
            } else {
                activateBtn.disabled = false;
                activateBtn.style.opacity = '1';
            }
        }

        // Calculate price
        function calculatePrice() {
            const distance = parseFloat(document.getElementById('distanceInput').value);
            const priceDiv = document.getElementById('calculatedPrice');
            
            if (distance > 0) {
                const price = distance * 10; // 10 دينار لكل كيلومتر
                priceDiv.textContent = `الثمن: ${price} دينار`;
                priceDiv.classList.remove('hidden');
            } else {
                priceDiv.classList.add('hidden');
            }
        }

        // Call driver
        function callDriver(driverId) {
            alert('جاري الاتصال بالسائق...');
        }

        // Message driver
        function messageDriver(driverId) {
            alert('جاري فتح المحادثة...');
        }

        // Logout
        function logout() {
            selectedRole = null;
            selectedDriver = null;
            isRideActive = false;
            showScreen('login-screen');
            
            // Reset forms
            document.querySelectorAll('form').forEach(form => form.reset());
            document.querySelectorAll('.role-card').forEach(card => card.classList.remove('selected'));
            document.getElementById('loginBtn').disabled = true;
        }
    </script>
</body>
</html>
